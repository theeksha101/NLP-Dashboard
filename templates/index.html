{% extends 'base.html' %}

{% block head %}{% endblock %} 

{% block body %}

<form method="post">

<div class="container"> 
    <div class="header">
        <h1 class="heading" style="text-align: center">Sentiment Analyzer</h1>
    </div>

    <div class="content-large">
        <textarea class="text-box" type="text" id="data" name="data" placeholder="Enter some text here..."></textarea>
        <input type="submit" id="accept-data" name="accept-data" value="Analyze" class="add-task-button">
    </div>

    <div class="content-large" method="post">
        {% for message in get_flashed_messages() %}
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <strong>Ooopss!!!</strong> Looks like you haven't entered any text. Please enter some text.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}

        {% for result in results %}
            <h4 style="text-align: center"> {{result}} </h4>
        {% endfor %}

        {% if score_dict|length > 0 %}
            {% if score_dict['compound'] >= 0.5 %}
                <h4 class="pos">Your Overall Text Was Positive </h4>
            {% elif score_dict['compound'] <= -0.5 %}
                <h4 class="neg">Your Overall Text Was Negative </h4>
            {% else %}
                <h4 class="neu">Your Overall Text Was Neutral </h4>
            {% endif%}
        {% endif %}

    </div>

    <div class="footer">
        <canvas id="lineChart" width="600" height="300"></canvas>
        
        <script>
            var ctx = document.getElementById("lineChart").getContext("2d");
            var lineChart = new Chart(ctx, {
                type:"line",
                data:{
                    labels: {{ labels | safe }},
                    datasets: [
                        {
                            label: "Data Points",
                            data: {{ values | safe}},
                            fill: false,
                            borderColor: "rgb(245, 158, 66)",
                            lineTension: 0.5
                        }
                    ]
                },
                options: {
                    responsive: false
                }
            });
        </script>
    </div>

    <div class="footer" style="height: 400; width: 700">
        <canvas id="pieChart" width="600" height="300"></canvas>
        <script>
            var ctx = document.getElementById("pieChart").getContext("2d");
            var pieChart = new Chart(ctx, {
                type: 'pie', 
                data:{
                    labels: {{ labels | safe }},
                    datasets: [
                        {
                            label: "Data",
                            data: {{ values | safe}},
                            backgroundColor: [
                                'rgb(255, 99, 132)',
                                'rgb(54, 162, 235)',
                                'rgb(255, 205, 86)'
                            ],
                            hoverOffset: 4
                        }
                    ]
                }
            });
            document.write("{{ values }}")
        </script>
    </div>
</div>

       
</form>

</div>
{% endblock %}

